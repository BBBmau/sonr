syntax = "proto3";

import "data.proto";

// Require Go Package
option go_package = ".;models";

// [PLUGIN]
// Initial Connection Message
message ConnectionRequest {
  string olc = 1;
  string username = 2;
  Device device = 3;
  Directories directory = 4;
  Contact contact = 5;
  Connectivity connectivity = 6;

  // Define Connectivity
  enum Connectivity { NONE = 0; WIFI = 1; MOBILE = 2; }
}

// Invitation Message sent on RPC
message AuthInvite {
  // Define Root Message
  Peer from = 1;
  Payload payload = 2;
}

// Reply Message sent on RPC
message AuthReply {
  Peer from = 1;
  Payload payload = 2;
  bool decision = 3;
}

// Define Payload
message Payload {
  Metadata file = 1;
  Contact contact = 2;
  Link link = 3;
  Type type = 4;
  enum Type { NONE = 0; FILE = 1; CONTACT = 2; URL = 3; TEXT = 4; }
}

// Define Lobby Message
message LobbyMessage {
  Event event = 1;
  Peer peer = 2;
  string id = 3;
  double direction = 4;

  enum Event { NONE = 0; JOIN = 1; UPDATE = 2; STANDBY = 3; EXIT = 4; }
}

// Error Message
message ErrorMessage {
  string message = 1;
  string method = 2;
}
