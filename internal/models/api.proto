syntax = "proto3";

import "data.proto";

// Require Go Package
option go_package = ".;models";

// [PLUGIN]
// Initial Connection Message
message ConnectionRequest {
  string olc = 1;
  string username = 2;
  Device device = 3;
  Directories directory = 4;
  Contact contact = 5;
}
// Define Payload Enum
enum Payload {
  NONE = 0;
  FILE = 1;
  CONTACT = 2;
  URL = 3;
  TEXT = 4;
}

// Externally Shared Media
message SharedMediaFile {
  int32 duration = 1;
  string path = 2;
  string thumbnail = 3;
  Type type = 4;

  enum Type {
    IMAGE = 0;
    VIDEO = 1;
    FILE = 2;
  }
}

// Invitation Message sent on RPC
message AuthInvite {
  Payload payload = 1;
  Peer from = 2;
  Preview preview = 3;
  Contact contact = 4;
  string url = 5;
}

// Reply Message sent on RPC
message AuthReply {
  Payload payload = 1;
  Peer from = 2;
  bool decision = 3;
  Contact contact = 4;
}

// Define Lobby Message
message LobbyMessage {
  Event event = 1;
  Peer peer = 2;
  string id = 3;
  double direction = 4;

  enum Event {
    NONE = 0;
    JOIN = 1;
    UPDATE = 2;
    STANDBY = 3;
    EXIT = 4;
  }
}

// Define Received Message: Post Transfer
message Received {
  Payload payload = 1;
  Peer owner = 2;
  Metadata metadata = 3;
  Contact contact = 4;
  string url = 5;
  int32 received = 6;
}

// Error Message
message ErrorMessage {
  string message = 1;
  string method = 2;
}
