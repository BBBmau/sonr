syntax = "proto3";

// Require Go Package
option go_package = ".;models";

// Define Metadata Type: For Received Transfer
message Metadata {
  int32 id = 1;
  string name = 2;
  string path = 3;
  int32 size = 4;
  MIME mime = 5;
  bytes thumbnail = 6;
  int32 received = 7;
  Peer owner = 8;
}

// Define Preview: For File Transfer Request
message Preview {
  MIME mime = 1;
  string name = 2;
  int32 size = 3;
  bytes thumbnail = 4;
  int32 duration = 5;
}

// Define MIME: Protobuf Version of Mime
message MIME {
  Type type = 1;
  string subtype = 2;
  string value = 3;

  enum Type {
    application = 0;
    audio = 1;
    image = 2;
    text = 3;
    video = 4;
  }
}

// Define Lobby Type: For Info about Lobby
message Lobby {
  string code = 1;
  int32 size = 2;
  map<string, Peer> peers = 3;
}

// Define Contact Type: Will be CSV in Future
message Contact {
  // Default
  string firstName = 1;
  string lastName = 2;
  string phone = 3;
  string website = 4;
  string email = 5;
  bytes profilePic = 6;
  string header = 7;

  repeated SocialTile socials = 8;

  // Extended Social Media Integration
  message SocialTile {
    Provider provider = 1;
    int32 position = 2; // 0-7
    string username = 3;
    string showcase = 4;
    string feed = 5;

    enum Provider {
      Instagram = 0; // Feed/Link Option
      TikTok = 1;    // Feed/Link Option
      Facebook = 2;  // Link Only
      YouTube = 3;   // Feed/Link Option
      Spotify = 4;   // Feed/Link Option
      Medium = 5;    // Feed/Link Option
      Twitter = 6;   // Feed/Link Option
      Snapchat = 7;  // Feed/Link Option
      Github = 8;    // Feed/Link Option
    }
  }
}

// Define Device Type: Information about device
message Device {
  string id = 1;
  string platform = 2;
  string model = 3;
  string name = 4;
  string version = 5;
  int32 sdk = 6; // For Android
  bool desktop = 7;
}

// Define Directories Type: Where Data can be stored
message Directories {
  string cache = 1; // Only For Desktop
  string documents = 2;
  string downloads = 3;
  string temporary = 4;
}

// Define Peer: Basic Info Sent to Peers
message Peer {
  string id = 1;
  Device device = 2;
  Position position = 3;
  Profile profile = 4;
  string username = 5;
  string firstName = 6;
  double direction = 7;
  double antipodal = 8;
}

// Define Profile: General Information about Peer
message Profile {
  string username = 1;
  string firstName = 2;
  string lastName = 3;
  bytes picture = 4;
}

// Define Direction: Includes All Direction Info
message Position {
  // Given Data
  double direction = 1;
  double antipodal = 2;
  double distance = 3;
  string heading = 4;

  // Calculated Data
  Discovery discovery = 5;
  Proximity proximity = 6;

  // Enum for Discovery Type
  enum Discovery {
    Linked = 0;
    MDNS = 1;
    Ultrasonic = 2;
    Rendevouz = 3;
  }

  // Enum for Proximity from User
  enum Proximity {
    Unknown = 0;
    Immediate = 1;
    Near = 2;
    Distant = 3;
  }
}
